<!DOCTYPE html>
<html>
    <head>
        <meta name="generator" content="Pagespace">
        <meta charset="utf-8">

        <meta name="generator" content="Pagespace">
        <meta name="description" content="">

        <title>Pagespace | Plugins</title>

        <link rel="shortcut icon" href="../favicon.ico">
        <link href="https://fonts.googleapis.com/css?family=Raleway:400,300" rel="stylesheet" type="text/css">
        <link type="text/css" rel="stylesheet" href="../styles/site.css">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/styles/solarized-dark.min.css">
    </head>
    <body class="landing">
        <header class="content-header">
            <h1>
                <span data-color="#ff005a" class="p">p</span><span data-color="#00D6F3" class="a">a</span><span data-color="#faa129" class="g">g</span><span data-color="#29f38f" class="e">e</span><span data-color="#cbcbcb">space</span>
            </h1>
            <nav class="util-nav">
                <ul>
                    <li><a href="../developers/tour.html">Developer guide</a></li>
                    <li><a href="../users/start.html">User guide</a></li>
                    <li><a href="https://github.com/pagespace/pagespace">Github <img src="../styles/img/github.svg"></a></li>
                </ul>
            </nav>
        </header>
        <main class="main">
            <div class="wrap">
                <nav class="content-nav">
                    <div data-page-id="56abc013d2ac681672fefa44" data-region="ContentNav"><div>
<ul class="side-nav">
            <li class=""><a href="../developers/start.html">Start</a></li>
            <li class=""><a href="../developers/tour.html">Tour</a></li>
            <li class=""><a href="../developers/templates.html">Templates</a></li>
            <li class=""><a href="../developers/plugins.html">Plugins</a></li>
            <li class=""><a href="../developers/apis.html">APIs</a></li>
            <li class=""><a href="../developers/static-site-generator.html">Static site generator</a></li>
</ul>
</div></div>
                </nav>
                <section class="content">
                    <div data-page-id="56abc013d2ac681672fefa44" data-region="Main"><div>
<div class="github-markdown">
    <h1 id="plugins">Plugins</h1>
<p>Plugins are associated with <strong>includes</strong> and used to render and edit include data.</p>
<h2 id="pagespace-factory-plugins">Pagespace factory plugins</h2>
<h3 id="-navigation-https-github-com-pagespace-pagespace-nav-"><a href="https://github.com/pagespace/pagespace-nav">Navigation</a></h3>
<p>Renders navigation elements based on the page structure.</p>
<pre><code>npm <span class="hljs-operator"><span class="hljs-keyword">install</span> pagesapce-<span class="hljs-keyword">nav</span> <span class="hljs-comment">--save</span></span>
</code></pre><h3 id="-html-https-github-com-pagespace-pagespace-html-"><a href="https://github.com/pagespace/pagespace-html">HTML</a></h3>
<p>Outputs HTML markup which is editable directly as HTML. Useful for copy pasting embed links from Youtube etc.</p>
<pre><code>npm <span class="hljs-operator"><span class="hljs-keyword">install</span> pagespace-html <span class="hljs-comment">--save</span></span>
</code></pre><h3 id="-web-copy-https-github-com-pagespace-pagespace-webcopy-"><a href="https://github.com/pagespace/pagespace-webcopy">Web copy</a></h3>
<p>Outputs HTML markup which is editable using a WYSIWYG editor.</p>
<pre><code>npm <span class="hljs-operator"><span class="hljs-keyword">install</span> pagesapce-webcopy <span class="hljs-comment">--save</span></span>
</code></pre><h3 id="-markdown-https-github-com-pagespace-pagespace-markdown-"><a href="https://github.com/pagespace/pagespace-markdown">Markdown</a></h3>
<p>Outputs HTML converted from Markdown, which is editable using a Markdown editor.</p>
<pre><code>npm <span class="hljs-operator"><span class="hljs-keyword">install</span> pagespace-markdown <span class="hljs-comment">--save</span></span>
</code></pre><h3 id="-posts-https-github-com-pagespace-pagespace-posts-"><a href="https://github.com/pagespace/pagespace-posts">Posts</a></h3>
<p>Blogs can be generated by listing the contents of a given region for a collection of pages.</p>
<pre><code>npm <span class="hljs-operator"><span class="hljs-keyword">install</span> pagespace-posts <span class="hljs-comment">--save</span></span>
</code></pre><h2 id="custom-plugins">Custom plugins</h2>
<p>Custom plugins are easy to create.</p>
<h3 id="steps-to-create-a-custom-plugin">Steps to create a custom plugin</h3>
<h4 id="1-initialize-a-node-package">1. Initialize a Node package</h4>
<pre><code class="lang-bash">npm init
</code></pre>
<ul>
<li>By convention, prefix the module name with <code>pagespace-</code></li>
<li>Include the keyword <code>pagespace-plugin</code></li>
</ul>
<h4 id="2-create-the-schema">2. Create the schema</h4>
<p>Add a <code>pagesapce</code> block in your <code>package.json</code> file with a <code>schema</code> block. The schema block defines the fields of the 
plugins configuration:</p>
<pre><code class="lang-javascript">    <span class="hljs-string">"name"</span> : <span class="hljs-string">"pagespace-fetch-html"</span>,
    <span class="hljs-string">"keywords"</span> : [ <span class="hljs-string">"pagespace-plugin"</span> ],
    ...
    <span class="hljs-string">"pagespace"</span> : {
        <span class="hljs-string">"schema"</span> : [{
            <span class="hljs-string">"name"</span> : <span class="hljs-string">"url"</span>,
            <span class="hljs-string">"title"</span> : <span class="hljs-string">"HTML Source"</span>,
            <span class="hljs-string">"type"</span> : <span class="hljs-string">"string"</span>,
            <span class="hljs-string">"required"</span> : <span class="hljs-literal">true</span>
        }, {
            <span class="hljs-string">"name"</span> : <span class="hljs-string">"heading"</span>,
            <span class="hljs-string">"title"</span> <span class="hljs-string">"Include heading"</span>,
            <span class="hljs-string">"default"</span> : <span class="hljs-string">"Got this HTML"</span>,
            <span class="hljs-string">"type"</span> : <span class="hljs-string">"string"</span>
        }],
        <span class="hljs-string">"ttl"</span> : <span class="hljs-number">60000</span>
    }
</code></pre>
<h4 id="3-create-the-module-s-entry-point-">3. Create the moduleâ€™s entry point:</h4>
<pre><code class="lang-bash">touch index.js
</code></pre>
<p>and implement the <code>process()</code> method which should return the rendering context for the partial template:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> url = <span class="hljs-built_in">require</span>(<span class="hljs-string">'url'</span>);
<span class="hljs-keyword">var</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>)

<span class="hljs-built_in">module</span>.exports = {
    process: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">config</span>) </span>{
        pagesapce.cache.get().then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>) </span>{

            <span class="hljs-keyword">if</span>(result) {
                <span class="hljs-keyword">return</span> result;
            }

            <span class="hljs-keyword">var</span> urlParts = url.parse(config.url);
            <span class="hljs-keyword">var</span> requestOpts = {
                hostname: urlParts.hostname,
                port: urlParts.port,
                path: urlParts.path,
                method: <span class="hljs-string">'GET'</span>
            };

            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">resolve</span>) </span>{
                <span class="hljs-keyword">var</span> req = http.request(requestOpts, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>{
                    <span class="hljs-keyword">var</span> body = <span class="hljs-string">''</span>;

                    res.on(<span class="hljs-string">'data'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">chunk</span>) </span>{
                        body += chunk;
                    });

                    res.on(<span class="hljs-string">'end'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        result = {
                            html: body,
                            heading: config.heading
                        };
                        pagespace.cache.set(result);
                        resolve(result);
                    });
                });

                req.on(<span class="hljs-string">'error'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) </span>{
                    resolve({
                        html: <span class="hljs-string">'&lt;!-- Unable to resolve HTML include--&gt;'</span>,
                        heading: config.heading
                    });
                });

                req.end();
            });
        }).catch(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) </span>{
            pagesapce.logger.warn(err);
        });
    }
};
</code></pre>
<p>If the plugin performs an asynchronous operation, it may return a promise.</p>
<h4 id="4-create-the-partial-template">4. Create the partial template</h4>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"html-include"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">h1</span>&gt;</span>{{heading}}<span class="hljs-tag">&lt;/<span class="hljs-title">h1</span>&gt;</span>
    {{{html}}}
<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
</code></pre>
<h4 id="5-create-a-static-editor-optional-">5. Create a static editor (optional)</h4>
<p>TBD</p>
<h4 id="6-install-the-plugin">6. Install the plugin</h4>
<p>You can publish and install your plugin via the NPM registry, but its also easier to get started by installing your 
module from a local path:</p>
<pre><code class="lang-bash">npm install path/to/html-fetch-include
</code></pre>
<p>Restart the server for the plugin to be automatically imported.</p>

</div>
</div></div>
                </section>
            </div>
        </main>
        <footer class="footer">
            <p>Pagespace &copy; 2016</p>
        </footer>
    </body>
</html>